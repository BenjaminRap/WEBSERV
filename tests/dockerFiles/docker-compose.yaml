services:
  php-fpm:
    build: ./php-fpm/
    networks:
      - docker-network
    volumes:
      - website-nginx:/app/
  nginx:
    depends_on:
      - php-fpm
    build: ./nginx/
    ports:
      # - "80:80"
      - "8181:8181"
    networks:
      - docker-network
    volumes:
      - website-nginx:/app/
  webserv:
    build: ./webserv/
    ports:
      - "8080:8080"
    networks:
      - docker-network
    volumes:
      - website-webserv:/unitTest
volumes:
  website-nginx:
    driver: local
    driver_opts:
      type: none
      device: ../website
      o: bind
  website-webserv:
    driver: local
    driver_opts:
      type: none
      device: ../../code/unitTest/
      o: bind
networks:
  docker-network:
    name: docker-network
    driver: bridge
